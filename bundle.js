!function(o){function t(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return o[i].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var e={};t.m=o,t.c=e,t.i=function(o){return o},t.d=function(o,e,i){t.o(o,e)||Object.defineProperty(o,e,{configurable:!1,enumerable:!0,get:i})},t.n=function(o){var e=o&&o.__esModule?function(){return o.default}:function(){return o};return t.d(e,"a",e),e},t.o=function(o,t){return Object.prototype.hasOwnProperty.call(o,t)},t.p="",t(t.s=2)}([function(o,t){},function(o,t){},function(o,t,e){"use strict";e(0),e(1);var i=function(o){function t(t,e,i){var n=this;this.pos=o.createVector(t,e),this.vel=o.createVector(0,0),this.acc=o.createVector(0,0),this.z=i,this.connected=[],this.draw=function(){n.acc=o.createVector(0,0),n.connected.forEach(function(t){var e=(n.z+t.z)/h;o.stroke("rgba(255,255,255,"+e+")"),o.strokeWeight(e),o.line(n.pos.x,n.pos.y,t.pos.x,t.pos.y);var i=p5.Vector.sub(t.pos,n.pos),r=i.mag();r=o.constrain(r,1,25);var s=r/1e4;i.setMag(s),r<5&&i.mult(-1),n.acc.add(i)}),n.vel.add(n.acc),n.vel.limit(2),n.pos.add(n.vel),n.pos.x<0?(n.pos.x=0,n.vel.mult(0)):n.pos.x>o.windowWidth&&(n.pos.x=o.windowWidth,n.vel.mult(0)),n.pos.y<0?(n.pos.y=0,n.vel.mult(0)):n.pos.y>o.windowHeight&&(n.pos.y=o.windowHeight,n.vel.mult(0))}}function e(){s=[],c=[],a=4e3,d=100,h=25,p=150,o.windowWidth<640&&(p=20),l=10,u=null,f=null;for(var e=0;e<l;e++)s.push(new t(o.random(o.windowWidth),o.random(o.windowHeight),o.random(5)));for(var v=0;v<l;v++)s[v].connected.push(s[(v+1)%l]),s[v].connected.push(s[(v+2)%l]),s[v].connected.push(s[(v+3)%l]),s[(v+1)%l].connected.push(s[v]),s[(v+2)%l].connected.push(s[v]);r=new i;for(var m=0;m<p;m++){var w=new n(o.random(0,o.windowWidth/2),o.random(0,10));r.addFish(w)}}function i(){var o=this;this.fishes=[],this.run=function(){for(var t=0;t<o.fishes.length;t++)o.fishes[t].run(o.fishes)},this.addFish=function(t){o.fishes.push(t)}}function n(t,e){var i=this;this.acceleration=o.createVector(0,0),this.velocity=o.createVector(o.random(-1,1),o.random(-1,1)),this.position=o.createVector(t,e),this.r=3.5,this.maxspeed=2,this.maxforce=.05,this.fishLength=5,this.fishWidth=2,this.fishBravery=o.random(30,200),this.run=function(o){i.flock(o),i.update(),i.borders(),i.render()},this.applyForce=function(o){i.acceleration.add(o)},this.flock=function(o){var t=i.separate(o),e=i.align(o),n=i.cohesion(o);t.mult(1.2),e.mult(1),n.mult(1),i.applyForce(t),i.applyForce(e),i.applyForce(n)},this.update=function(){i.velocity.add(i.acceleration),i.velocity.limit(i.maxspeed);var o=p5.Vector.dist(i.position,v),t=void 0;o<i.fishBravery&&(t=p5.Vector.sub(i.position,v),t.normalize(),t.mult(100/o),i.velocity.add(t)),i.position.add(i.velocity),i.acceleration.mult(0)},this.seek=function(o){var t=p5.Vector.sub(o,i.position);t.normalize(),t.mult(i.maxspeed);var e=p5.Vector.sub(t,i.velocity);return e.limit(i.maxforce),e},this.render=function(){var t=i.velocity.heading()+o.radians(90);o.push(),o.fill("rgba(41, 128, 185, 0.17)"),o.noStroke(),o.translate(i.position.x,i.position.y),o.rotate(t-o.PI/2),o.ellipseMode(o.CENTER),o.ellipse(0,0,i.r*i.fishLength,i.r*i.fishWidth),o.beginShape(),o.vertex(-i.r,0),o.vertex(-i.r*i.fishLength,4*-i.r/5),o.vertex(-i.r*i.fishLength,4*i.r/5),o.endShape(o.CLOSE),o.pop()},this.borders=function(){i.position.x<-i.r-i.fishLength&&(i.position.x=o.windowWidth+i.r+i.fishLength),i.position.y<-i.r-i.fishLength&&(i.position.y=o.windowHeight+i.r+i.fishLength),i.position.x>o.windowWidth+i.r+i.fishLength&&(i.position.x=-i.r-i.fishLength),i.position.y>o.windowHeight+i.r+i.fishLength&&(i.position.y=-i.r-i.fishLength)},this.separate=function(t){for(var e=o.createVector(0,0),n=0,r=0;r<t.length;r++){var s=p5.Vector.dist(i.position,t[r].position);if(s>0&&s<25){var c=p5.Vector.sub(i.position,t[r].position);c.normalize(),c.div(s),e.add(c),n++}}return n>0&&e.div(n),e.mag()>0&&(e.normalize(),e.mult(i.maxspeed),e.sub(i.velocity),e.limit(i.maxforce)),e},this.align=function(t){for(var e=o.createVector(0,0),n=0,r=0;r<t.length;r++){var s=p5.Vector.dist(i.position,t[r].position);s>0&&s<50&&(e.add(t[r].velocity),n++)}if(n>0){e.div(n),e.normalize(),e.mult(i.maxspeed);var c=p5.Vector.sub(e,i.velocity);return c.limit(i.maxforce),c}return o.createVector(0,0)},this.cohesion=function(t){for(var e=o.createVector(0,0),n=0,r=0;r<t.length;r++){var s=p5.Vector.dist(i.position,t[r].position);s>0&&s<50&&(e.add(t[r].position),n++)}return n>0?(e.div(n),i.seek(e)):o.createVector(0,0)}}var r=void 0,s=void 0,c=void 0,a=void 0,d=void 0,h=void 0,p=void 0,l=void 0,u=void 0,f=null,v=void 0;o.setup=function(){o.createCanvas(window.innerWidth,window.innerHeight),o.stroke(255),e()},o.draw=function(){v=o.createVector(o.mouseX,o.mouseY),o.clear(),s.forEach(function(o){o.draw()}),r.run(),a++,a>d&&(a=0,null!=f?(u=f,f=f.connected[o.floor(o.random(0,f.connected.length))]):(u=s[o.floor(o.random(0,s.length))],f=u.connected[o.floor(o.random(0,u.connected.length))])),o.stroke("rgba(255,255,255,0.3)"),o.strokeWeight(1.3),o.line(u.pos.x,u.pos.y,f.pos.x,f.pos.y);var t=p5.Vector.sub(f.pos,u.pos),e=f.pos.dist(u.pos);t.normalize();var i=p5.Vector.add(u.pos,t.mult(e/d*a));o.push(),o.noStroke(),o.fill("#4FCAFF"),o.ellipseMode(o.CENTER),o.ellipse(i.x,i.y,5),o.pop()},o.windowResized=function(){o.resizeCanvas(window.innerWidth,window.innerHeight),e()}};new p5(i,"background-canvas")}]);